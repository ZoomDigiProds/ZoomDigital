@model InternalProj.Models.StaffRegViewModel

@{
    ViewData["Title"] = "Staff Details";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

<style>
    body {
        background-color: #f2f4f8;
    }

    .details-wrapper {
        max-width: 1100px;
        margin: 40px auto;
        background-color: #ffffff;
        padding: 40px 30px;
        border-radius: 16px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    }

    .details-heading {
        font-size: 24px;
        font-weight: bold;
        text-align: center;
        margin-bottom: 40px;
        color: #333;
    }

    .four-col-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
        gap: 20px 25px;
    }

    .detail-box {
        background-color: #f9fafc;
        border-radius: 8px;
        padding: 16px 18px;
        border: 1px solid #e0e6ed;
        transition: 0.2s;
    }

        .detail-box:hover {
            background-color: #eef2f7;
            border-color: #d6dbe3;
        }

    .detail-label {
        font-size: 13px;
        font-weight: 600;
        color: #555;
        margin-bottom: 4px;
    }

    .detail-value {
        font-size: 14px;
        color: #222;
        font-weight: 500;
    }

    .action-buttons {
        margin-top: 40px;
        text-align: center;
    }

        .action-buttons .btn {
            min-width: 120px;
            margin: 0 10px;
            border-radius: 30px;
            padding: 8px 18px;
        }
</style>
@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success text-center" id="success">
        @TempData["SuccessMessage"]
    </div>
}

<script>
    setTimeout(() => {
        $('#success').fadeOut('slow');
    }, 5000);
</script>

<div class="container details-wrapper">
    <div class="details-heading">Staff Details</div>

    <div class="four-col-grid">
        @if (!string.IsNullOrWhiteSpace(Model.FirstName))
        {
            <div class="detail-box">
                <div class="detail-label">First Name</div>
                <div class="detail-value">@Model.FirstName</div>
            </div>
        }
        @if (!string.IsNullOrWhiteSpace(Model.LastName))
        {
            <div class="detail-box">
                <div class="detail-label">Last Name</div>
                <div class="detail-value">@Model.LastName</div>
            </div>
        }
        @if (Model.DOB != null)
        {
            <div class="detail-box">
                <div class="detail-label">DOB</div>
                <div class="detail-value">@Model.DOB?.ToString("yyyy-MM-dd")</div>
            </div>
        }
        @if (Model.DOJ != null)
        {
            <div class="detail-box">
                <div class="detail-label">DOJ</div>
                <div class="detail-value">@Model.DOJ?.ToString("yyyy-MM-dd")</div>
            </div>
        }
        @if (Model.BranchId != null && Model.Branches?.FirstOrDefault(b => b.BranchId == Model.BranchId) != null)
        {
            <div class="detail-box">
                <div class="detail-label">Branch</div>
                <div class="detail-value">@Model.Branches.FirstOrDefault(b => b.BranchId == Model.BranchId)?.BranchName</div>
            </div>
        }

        @if (!string.IsNullOrWhiteSpace(Model.UserName))
        {
            <div class="detail-box">
                <div class="detail-label">Username</div>
                <div class="detail-value">@Model.UserName</div>
            </div>
        }
        @if (!string.IsNullOrWhiteSpace(Model.Address1))
        {
            <div class="detail-box">
                <div class="detail-label">Address 1</div>
                <div class="detail-value">@Model.Address1</div>
            </div>
        }
        @if (!string.IsNullOrWhiteSpace(Model.Address2))
        {
            <div class="detail-box">
                <div class="detail-label">Address 2</div>
                <div class="detail-value">@Model.Address2</div>
            </div>
        }
        @if (!string.IsNullOrWhiteSpace(Model.Phone1))
        {
            <div class="detail-box">
                <div class="detail-label">Phone 1</div>
                <div class="detail-value">@Model.Phone1</div>
            </div>
        }
        @if (!string.IsNullOrWhiteSpace(Model.Phone2))
        {
            <div class="detail-box">
                <div class="detail-label">Phone 2</div>
                <div class="detail-value">@Model.Phone2</div>
            </div>
        }
        @if (!string.IsNullOrWhiteSpace(Model.Whatsapp))
        {
            <div class="detail-box">
                <div class="detail-label">WhatsApp</div>
                <div class="detail-value">@Model.Whatsapp</div>
            </div>
        }
        @if (!string.IsNullOrWhiteSpace(Model.Email))
        {
            <div class="detail-box">
                <div class="detail-label">Email</div>
                <div class="detail-value">@Model.Email</div>
            </div>
        }
        @if (Model.PhoneTypeId != null && Model.PhoneTypes?.FirstOrDefault(p => p.PhoneTypeId == Model.PhoneTypeId) != null)
        {
            <div class="detail-box">
                <div class="detail-label">Phone Type</div>
                <div class="detail-value">@Model.PhoneTypes.FirstOrDefault(p => p.PhoneTypeId == Model.PhoneTypeId)?.PhoneTypeName</div>
            </div>
        }

        @* <div class="detail-box"> *@
        @*     <div class="detail-label">Category</div> *@
        @*     <div class="detail-value">@Model.CustomerCategories.FirstOrDefault(c => c.CategoryId == Model.CategoryId)?.CategoryName</div> *@
        @* </div> *@
        @* <div class="detail-box"> *@
        @*     <div class="detail-label">Remarks</div> *@
        @*     <div class="detail-value">@Model.Remarks</div> *@
        @* </div> *@

        @if (Model.SelectedDesignationIds?.Any() == true)
        {
            <div class="detail-box">
                <div class="detail-label">Designations</div>
                <div class="detail-value">
                    @foreach (var desigId in Model.SelectedDesignationIds)
                    {
                        var desig = Model.Designations.FirstOrDefault(d => d.DesignationId == desigId);
                        if (desig != null)
                        {
                            <div>@desig.Name</div>
                        }
                    }
                </div>
            </div>
        }

        @if (Model.SelectedDeptIds?.Any() == true)
        {
            <div class="detail-box">
                <div class="detail-label">Departments</div>
                <div class="detail-value">
                    @foreach (var deptId in Model.SelectedDeptIds)
                    {
                        var dept = Model.Departments.FirstOrDefault(d => d.DeptId == deptId);
                        if (dept != null)
                        {
                            <div>@dept.Name</div>
                        }
                    }
                </div>
            </div>
        }
    </div>

    <div class="action-buttons">
        <a asp-action="Edit" asp-route-id="@Model.StaffRegId" class="btn btn-primary">Edit</a>
        <a asp-action="Index" class="btn btn-outline-secondary">Back</a>
    </div>
</div>
